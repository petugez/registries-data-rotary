{
	"$schema": "http://json-schema.org/schema#",
	"id": "uri://registries/people",

	"blocks":{
		"person":{
			"title": "Základné informácie",
			"transCode": "schema.people.baseData",
			"type": "object",
			"properties":{
				"registrationID": {
					"title": "Registračné číslo",
					"transCode": "schema.people.registrationID",
					"type": "string"
				},
				"id": {
					"title": "Identifikačné číslo",
					"transCode": "schema.people.identifier",
					"type": "string"
				},
				"name": {
					"title": "Meno",
					"transCode": "schema.people.name",
					"type": "string",
					"required": true,
					"collate":true
				},
				"surName": {
					"title": "Priezvisko",
					"transCode": "schema.people.surName",
					"type": "string",
					"required": true,
					"collate":true
				},
				"titleBefore": {
					"title": "Titul pred",
					"transCode": "schema.people.title.before",
					"type": "string"
				},
				"birthDate": {
					"title": "Dátum narodenia",
					"transCode": "schema.people.birthDate",
					"type": "string",
					"required": true,
					"render": {
						"component": "psui-datepicker"
					}
				},
				"gender": {
					"title": "Pohlavie",
					"transCode": "schema.people.gender",
					"type": " string",
					"enum": [
						"M",
						"Z"
					],
					"enumTransCodes":[
						"schema.people.gender.man",
						"schema.people.gender.woman"
					],
					"required": true,
					"render": {
						"component": "psui-selectbox",
						"searchable": true
					}
				},
				"stateOfPerson": {
					"title": "Stav osoby",
					"transCode": "schema.people.state.of.person",
					"type": "string",
					"enum": [
						"aktívna",
						"neaktívna"
					],
					"enumTransCodes":[
						"schema.people.state.of.person.active",
						"schema.people.state.of.person.inactive"
					],
					"render": {
						"component": "psui-selectbox",
						"searchable": true
					}
				}
			}
		},
		"membershipFeeInfo": {
			"title": "Členské príspevky",
			"transCode":"schema.people.membershipFeeInfo",
			"type": "object",
			"properties": {
				"membershipType": {
					"title": "Typ členského príspevku",
					"transCode":"schema.people.membershipFeeInfo.membershipType",
					"type": "string",
					"enum": [
						"Typ 1",
						"Typ 2",
						"Typ 3",
						"Typ 4",
						"Typ 5"
					],
					"render": {
						"component": "psui-selectbox",
						"searchable": true
					}
				},
				"paymentFrequency": {
					"title": "Frekvencia platby",
					"transCode":"schema.people.membershipFeeInfo.paymentFrequency",
					"type": "string",
					"enum": [
						"1xročne",
						"2xročne",
						"12xročne"
					],
					"required": false,
					"render": {
						"component": "psui-selectbox",
						"searchable": true
					}
				},
				"membershipFee": {
					"title": "Výška členského príspevku",
					"transCode":"schema.people.membershipFeeInfo.membershipFee",
					"type": "string",
					"required": false
				},
				"notes": {
					"title": "Poznámka",
					"transCode":"schema.people.membershipFeeInfo.notes",
					"type": "string",
					"required": false,
					"large": true
				}
			}
		},
		"photoInfo": {
			"title": "Fotografie",
			"transCode": "schema.people.photoInfo",
			"type": "object",
			"properties": {
				"photo": {
					"title": "Fotografia",
					"transCode": "schema.people.photo",
					"type": "string",
					"render": {
						"component": "psui-uploadable-image",
						"height": 300,
						"width": 220
					}
				}
			}
		},
		"contactInfo": {
			"title": "Kontaktné údaje",
			"transCode": "schema.people.contactInfo",
			"type": "object",
			"properties": {
				"street": {
					"title": "Ulica",
					"transCode": "schema.people.street",
					"type": "string"
				},
				"houseNumber": {
					"title": "Číslo domu",
					"transCode": "schema.people.houseNumber",
					"type": "string"
				},
				"city": {
					"$ref": "uri://registries/towns#town"
				},
				"zipCode": {
					"title": "PSČ",
					"transCode": "schema.people.zipCode",
					"type": "string"
				},
				"country": {
					"$ref": "uri://registries/countries#country"
				},
				"phoneNumber": {
					"title": "Telefón",
					"transCode": "schema.people.phoneNumber",
					"type": "string"
				},
				"mobileNumber": {
					"title": "Mobil",
					"transCode": "schema.people.mobileNumber",
					"type": "string"
				},
				"email": {
					"title": "E-mail",
					"transCode": "schema.people.email",
					"type": "string"
				},
				"currnetId": {
					"title": "Aktuálne číslo preukazu člena",
					"transCode":"schema.people.idInfo.currnetId",
					"type": "string"
				},
				"dateOfExpiration": {
					"title": "Dátum platnosti preukazu",
					"transCode":"schema.people.idInfo.dateOfExpiration",
					"type": "string",
					"render": {
						"component": "psui-datepicker"
					}
				}
			}
		},
		"otherInfo": {
			"title": "Ostatné údaje",
			"transCode": "schema.people.otherInfo",
			"type": "object",
			"properties": {
				"idCardNumber": {
					"title": "Číslo OP",
					"transCode": "schema.people.idCardNumber",
					"type": "string"
				},
				"childreUnder15": {
					"title": "Počet detí do 15 rokov",
					"transCode": "schema.people.childreUnder15",
					"type": "string"
				},
				"childreOver15": {
					"title": "Počet detí nad 15 rokov",
					"transCode": "schema.people.childreOver15",
					"type": "string"
				},
				"note": {
					"title": "Poznámka",
					"transCode": "schema.people.note",
					"type": "string",
					"large": true
				}
			}
		}
	},

	"models":{
		"person":{
			"table": "people",
			"security": {
				"create": {
					"static": [
						"Registry - write"
					]
				},
				"read": {
					"static": [
						"Registry - read"
					]
				},
				"modify": {
					"static": [
						"Registry - write"
					]
				}
			},
			"properties":{
				"baseData":{
					"extends":"uri://registries/people#blocks/person"
				},
				"photoInfo":{
					"$ref":"uri://registries/people#blocks/photoInfo"
				},
				"membershipFeeInfo": {
					"$ref":"uri://registries/people#blocks/membershipFeeInfo"
				},
				"contactInfo":{
					"$ref":"uri://registries/people#blocks/contactInfo"
				},
				"otherInfo":{
					"$ref":"uri://registries/people#blocks/otherInfo"
				}
			}
		},
		"fullperson":{
			"extends":"uri://registries/people#models/person",
			"title":"Osoba",
			"transCode":"schema.people.title"
		},
		"personalProfile": {
			"extends":"uri://registries/people#models/person",
			"title":"Môj profil",
			"transCode":"schema.people.personalProfile"
		}
	},

	"views":{
		"fullperson":{
			"new":{
				"extends":"uri://registries/people#models/fullperson"
			},
			"view":{
				"extends":"uri://registries/people#models/fullperson"	
			},
			"search":{
				"extends":"uri://registries/people#models/fullperson",
				"properties": {
					"photoInfo":null
				},
				"listFields": [
					{
						"field": "baseData.surName",
						"title": "Priezvisko",
						"transCode": "schema.people.listFields.surName"
					},
					{
						"field": "baseData.name",
						"title": "Meno",
						"transCode": "schema.people.listFields.name"
					},
					{
						"field": "baseData.birthDate",
						"title": "Dátum narodenia",
						"transCode": "schema.people.listFields.birthDate"
					},
					{
						"field": "contactInfo.city",
						"title": "Mesto",
						"transCode": "schema.people.listFields.city"
					}
				]
			}
		},
		"personalProfile":{
			"new":{
				"extends":"uri://registries/people#models/personalProfile",
				"title":"Môj profil"
			},
			"view":{
				"extends":"uri://registries/people#models/personalProfile",
				"title":"Môj profil"
			},
			"search":{
				"extends":"uri://registries/people#models/personalProfile",
				"title":"Môj profil",
				"listFields": [
					{
						"field": "baseData.surName",
						"title": "Priezvisko",
						"transCode": "schema.people.listFields.surName"
					},
					{
						"field": "baseData.name",
						"title": "Meno",
						"transCode": "schema.people.listFields.name"
					},
					{
						"field": "baseData.birthDate",
						"title": "Dátum narodenia",
						"transCode": "schema.people.listFields.birthDate"
					},
					{
						"field": "contactInfo.city",
						"title": "Mesto",
						"transCode": "schema.people.listFields.city"
					}
				]
			}
		}
	}
}